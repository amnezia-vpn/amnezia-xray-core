syntax = "proto3";

package xray.proxy.wireguard;
option csharp_namespace = "Xray.Proxy.WireGuard";
option go_package = "github.com/amnezia-vpn/amnezia-xray-core/proxy/wireguard";
option java_package = "com.xray.proxy.wireguard";
option java_multiple_files = true;

message PeerConfig {
  string public_key = 1;
  string pre_shared_key = 2;
  string endpoint = 3;
  uint32 keep_alive = 4;
  repeated string allowed_ips = 5;
}

message AmneziaParamters {
  string jc = 1;
  string jmin = 2;
  string jmax = 3;
  string s1 = 4;
  string s2 = 5;
  string s3 = 6;
  string s4 = 7;
  string h1 = 8;
  string h2 = 9;
  string h3 = 10;
  string h4 = 11;
  string i1 = 12;
  string i2 = 13;
  string i3 = 14;
  string i4 = 15;
  string i5 = 16;
}

message DeviceConfig {
  enum DomainStrategy {
    FORCE_IP = 0;
    FORCE_IP4 = 1;
    FORCE_IP6 = 2;
    FORCE_IP46 = 3;
    FORCE_IP64 = 4;
  }
  string secret_key = 1;
  repeated string endpoint = 2;
  repeated PeerConfig peers = 3;
  int32 mtu = 4;
  int32 num_workers = 5;
  bytes reserved = 6;
  DomainStrategy domain_strategy = 7;
  bool is_client = 8;
  bool no_kernel_tun = 9;
  optional AmneziaParamters parameters = 10;
}